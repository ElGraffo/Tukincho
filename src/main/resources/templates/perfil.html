<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">




    <th:block th:if="${#strings.contains(#httpServletRequest.requestURI, 'reserva')}">
        <link rel="stylesheet" th:href="@{/css/reserva.css}" />
    </th:block>

    <th:block th:if="${#strings.contains(#httpServletRequest.requestURI, 'perfil')}">
        <link rel="stylesheet" th:href="@{/css/perfil.css}" />
    </th:block>


    <th:block th:if="${#strings.contains(#httpServletRequest.requestURI, 'admin')}">
        <link rel="stylesheet" th:href="@{/css/cssAdmin.css}" />
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    </th:block>

    <th:block th:if="${#strings.contains(#httpServletRequest.requestURI, 'propiedad/listar')}">
        <link rel="stylesheet" href="/css/propiedades_listar.css">

    </th:block>

    <th:block th:unless="${#strings.contains(#httpServletRequest.requestURI, 'reserva')} or ${#strings.contains(#httpServletRequest.requestURI, 'admin')} or ${#strings.contains(#httpServletRequest.requestURI, 'perfil')} or ${#strings.contains(#httpServletRequest.requestURI, 'propiedad/listar')}">
        <link rel="stylesheet" th:href="@{/css/style.css}" />
    </th:block>




</head>


<body>
    <div class="contenedor">
        <!-- ================================================================================= -->
        <!-- ========================   NAVBAR   ======================================= -->
        <!-- ================================================================================= -->

        <nav th:replace="/fragments/navbar :: nav"></nav>


        <!--         <div>
            <h2>Información de cuenta</h2>
            <div class="tabla-contenedor">
                <table class="table">
                    <thead>

                    <tbody>
                        <tr>
                            <th scope="row">Nombre</th>
                            <td><span th:text="${session.usuariosession.nombreUsuario}"></span></td>

                        </tr>
                        <tr>
                            <th scope="row">Email</th>
                            <td><span th:text="${session.usuariosession.email}"></span></td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div> -->

        <!--         <div class="botonera">
            <button class="boton izquierdo boton-activo" id="boton-usuario" onclick=informacionUsuario()>Datos
                usuario</button>
            <button class="boton derecho" id="boton-reservas" onclick=informacionReservas()>Mis reservas</button>
        </div> -->

        <div class="botonera">
            <a class="boton izquierdo" id="boton-usuario">Datos
                usuario</a>
            <a th:if="${#strings.toString(usuario.rol) == 'PROPIETARIO'}" class="boton" th:href="@{/propiedad/mispropiedades/listar}"
                id="boton-propiedades">Mis propiedades</a>
            <a th:if="${#strings.toString(usuario.rol) == 'PROPIETARIO'}" class="boton" th:href="@{/mostrar/reservas/misinmuebles/__${usuario.getId()}__}"
                id="boton-reservas-a-mi">Me hicieron Reservas</a>
            <!-- <a class="boton" sec:authorize="hasAuthority('PROPIETARIO')" th:href="@{/propiedad/listar}">Mis propiedades</a> -->
            <a class="boton derecho"  th:href="@{/perfil/misReservasCliente/__${usuario.getNombreUsuario()}__}" id="boton-reservas">Mis reservas</a>
        </div>



        <div class="contenedor-info" id="informacion-usuario">
            <h2>Datos personales</h2>
            <div class="contenedor-info-imagen">
                <img th:src="@{/imagenes/logo.png}" alt="">
            </div>
            <hr>

            <!--             <div>
                <img th:if="${usuario.imagen != null}"
                    th:src="|data:${usuario.imagen.mime};base64,${usuario.imagen.generateBase64Image()}|" />
                <img th:if="${usuario.getImagen() != null}"
                    th:src="'data:' + ${usuario.getImagen().getMime()} + ';base64,' + ${usuario.getImagen().generateBase64Image()}" />
                <hr>
            </div> -->

            <div class="info-datos">
                <div>
                    <!--  <p><strong>Nombre</strong></p><span th:text="${session.usuario.nombreUsuario}"></span> -->
                    <p><strong>Nombre</strong></p>
                    <!-- <div class="info-datos-datitos"> -->
                    <span th:text="${usuario.nombreUsuario}"></span>
                    <!-- <a href="">Editar</a> -->
                </div>
                <hr>


                <div>
                    <p><strong>Email</strong></p>
                    <!-- <div class="info-datos-datitos"> -->
                    <span th:text="${usuario.email}"></span>
                    <!-- <a href="">Editar</a> -->
                </div>
                <hr>
                
            </div>
            <div>
                <a th:href="@{/perfil/modificar}">Editar</a>
            </div>
        </div>


    </div>
    <!--             <div th:if="${#strings.toString(usuario.rol) == 'USUARIO'}">
                <p><strong>Rol</strong></p>
                <span>Usuario</span>
                <hr>
            </div>

            <div th:if="${#strings.toString(usuario.rol) == 'PROPIETARIO'}">
                <p><strong>Rol</strong></p>
                <span>Propietario</span>
                <hr>
            </div>

            <div th:if="${#strings.toString(usuario.rol) == 'ADMIN'}">
                <p><strong>Rol</strong></p>
                <span>Admin</span>
                <hr>
            </div> -->
    </div>

    <!--         <div class="contenedor-info" th:if="${#strings.toString(usuario.rol) == 'PROPIETARIO'}">
            <div th:if="${reservasPropietario.size()==0}">
                <h2>No hay reservas realizadas</h2>
                <span th:text="${reservasPropietario[0].id}"></span> 
            </div>
            <div th:if="${reservasPropietario.size()>0}">
                <div th:each="reserva : ${reservasPropietario}">
                    <span th:text="${reserva.id}"></span>
                </div>
            </div> 
        </div> -->











    <!--         <div class="contenedor-reservas" id="informacion-reservas">

            <div class="contenedor-reserva-individual">

                <div class="contenedor-reserva-individual-interno">
                    <img th:src="@{/imagenes/logo.png}" alt="">


                    <div class="contenedor-datos-reserva">
                        <h2>Reserva de Kincho X</h2>
                        <br>
                        <p><strong>Fecha de ingreso:</strong> 2023/12/10</p>
                        <p><strong>Fecha de egreso:</strong> 2023/12/10</p>
                        <p><strong>Monto a pagar:</strong> 200000</p>
                    </div>

                    <div class="contenedor-botones-reserva-individual">
                        <button>Ver detalle de inmueble</button>
                        <button>Hacer reseña</button>
                        <button id="boton-cancelar">Cancelar reserva</button>
                    </div>
                </div>
            </div>

            <div class="contenedor-reserva-individual">

                <div class="contenedor-reserva-individual-interno">
                    <img th:src="@{/imagenes/logo.png}" alt="">


                    <div class="contenedor-datos-reserva">
                        <h2>Reserva de Kincho X</h2>
                        <br>
                        <p><strong>Fecha de ingreso:</strong> 2023/12/10</p>
                        <p><strong>Fecha de egreso:</strong> 2023/12/10</p>
                        <p><strong>Monto a pagar:</strong> 200000</p>
                    </div>

                    <div class="contenedor-botones-reserva-individual">
                        <button>Ver detalle de inmueble</button>
                        <button>Hacer reseña</button>
                        <button id="boton-cancelar">Cancelar reserva</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <footer th:replace="/fragments/footer :: footer"></footer>



    <script>

        function informacionUsuario() {
            let botonUsuario = document.getElementById("boton-usuario");
            let botonReservas = document.getElementById("boton-reservas");

            if (!botonUsuario.classList.contains("boton-activo")) {
                botonUsuario.classList.add("boton-activo");
            }
            if (botonReservas.classList.contains("boton-activo")) {
                botonReservas.classList.remove("boton-activo");
            }

            let divReservas = document.getElementById("informacion-reservas");
            let divUsuario = document.getElementById("informacion-usuario")

            divReservas.style.display = "none";
            divUsuario.style.display = "flex";
        }



        function informacionReservas() {
            let botonUsuario = document.getElementById("boton-usuario");
            let botonReservas = document.getElementById("boton-reservas");

            if (!botonReservas.classList.contains("boton-activo")) {
                botonReservas.classList.add("boton-activo");
            }
            if (botonUsuario.classList.contains("boton-activo")) {
                botonUsuario.classList.remove("boton-activo");
            }

            let divReservas = document.getElementById("informacion-reservas");
            let divUsuario = document.getElementById("informacion-usuario")

            divReservas.style.display = "flex";
            divUsuario.style.display = "none";
        }


    </script> -->

    <footer th:replace= "/fragments/footer :: footer" ></footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>




</html>